#include <bits/stdc++.h>using namespace std;const int base = 31;int mod ,q;string s;long long pw[100005],h[100005]; int gethash(int l,int r){    return ((h[r]-h[l-1]*pw[r-l+1])%mod+mod)%mod;}int main() {        cin>>mod>>s>>q;    int sizee=s.length();    s=" "+s;    pw[0]=1;    for(int i=1;i<=sizee;i++)    {        pw[i]=pw[i-1]*base%mod;    }    h[0]=0;    for(int i=1;i<=sizee;i++)    {        h[i]=(h[i-1]*31+s[i]-'a'+1)%mod;    }     int l,r;    while(q--)    {               cin>>l>>r;        cout<<gethash(l,r)<<"\n";    }}